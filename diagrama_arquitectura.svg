<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 750">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1C4587"/>
      <stop offset="100%" style="stop-color:#0D2B5C"/>
    </linearGradient>
    <linearGradient id="presentationGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9"/>
      <stop offset="100%" style="stop-color:#2E6BB5"/>
    </linearGradient>
    <linearGradient id="businessGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#34C759"/>
      <stop offset="100%" style="stop-color:#248A3D"/>
    </linearGradient>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FF9500"/>
      <stop offset="100%" style="stop-color:#CC7700"/>
    </linearGradient>
    <linearGradient id="firebaseGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#FFCA28"/>
      <stop offset="100%" style="stop-color:#FFA000"/>
    </linearGradient>
    <linearGradient id="servicesGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9C27B0"/>
      <stop offset="100%" style="stop-color:#7B1FA2"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.3"/>
    </filter>
    <filter id="smallShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowGray" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto">
      <path d="M0,0 L0,8 L12,4 z" fill="#a0a0a0"/>
    </marker>
    <marker id="arrowYellow" markerWidth="12" markerHeight="12" refX="9" refY="4" orient="auto">
      <path d="M0,0 L0,8 L12,4 z" fill="#FFCA28"/>
    </marker>
  </defs>
  
  <!-- Fondo -->
  <rect width="900" height="750" fill="#0a0a0f"/>
  
  <!-- Grid pattern -->
  <pattern id="grid" width="30" height="30" patternUnits="userSpaceOnUse">
    <path d="M 30 0 L 0 0 0 30" fill="none" stroke="#1a1a2e" stroke-width="0.3"/>
  </pattern>
  <rect width="900" height="750" fill="url(#grid)"/>
  
  <!-- T√≠tulo -->
  <rect x="250" y="15" width="400" height="45" rx="10" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <text x="450" y="45" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="white" text-anchor="middle">ARQUITECTURA DEL SISTEMA v2.0</text>
  
  <!-- ============ CAPA DE PRESENTACI√ìN ============ -->
  <rect x="50" y="80" width="800" height="150" rx="12" fill="#16213e" stroke="#4A90D9" stroke-width="2" filter="url(#shadow)"/>
  
  <rect x="70" y="90" width="200" height="28" rx="5" fill="url(#presentationGrad)"/>
  <text x="170" y="109" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">CAPA DE PRESENTACI√ìN (UI)</text>
  
  <!-- Screens -->
  <g transform="translate(80, 130)">
    <!-- Splash -->
    <rect x="0" y="0" width="120" height="80" rx="8" fill="#2d3a5c" stroke="#4A90D9" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="120" height="22" rx="8" fill="url(#presentationGrad)"/>
    <rect x="0" y="16" width="120" height="6" fill="url(#presentationGrad)"/>
    <text x="60" y="15" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">SplashScreen</text>
    <text x="60" y="45" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Logo + Carga</text>
    <text x="60" y="58" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Firebase Auth</text>
    <rect x="30" y="65" width="60" height="12" rx="3" fill="#4A90D9" opacity="0.3"/>
    <text x="60" y="74" font-family="Arial" font-size="7" fill="#4A90D9" text-anchor="middle">StatefulWidget</text>
  </g>
  
  <g transform="translate(220, 130)">
    <!-- Selecci√≥n Carrera -->
    <rect x="0" y="0" width="120" height="80" rx="8" fill="#2d3a5c" stroke="#4A90D9" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="120" height="22" rx="8" fill="url(#presentationGrad)"/>
    <rect x="0" y="16" width="120" height="6" fill="url(#presentationGrad)"/>
    <text x="60" y="15" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">Selecci√≥nCarrera</text>
    <text x="60" y="45" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Registro usuario</text>
    <text x="60" y="58" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Validaci√≥n RUN</text>
    <rect x="30" y="65" width="60" height="12" rx="3" fill="#4A90D9" opacity="0.3"/>
    <text x="60" y="74" font-family="Arial" font-size="7" fill="#4A90D9" text-anchor="middle">StatefulWidget</text>
  </g>
  
  <g transform="translate(360, 130)">
    <!-- HomePage -->
    <rect x="0" y="0" width="120" height="80" rx="8" fill="#2d3a5c" stroke="#4A90D9" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="120" height="22" rx="8" fill="url(#presentationGrad)"/>
    <rect x="0" y="16" width="120" height="6" fill="url(#presentationGrad)"/>
    <text x="60" y="15" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">HomePage</text>
    <text x="60" y="45" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Grid trimestres</text>
    <text x="60" y="58" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Estad√≠sticas</text>
    <rect x="30" y="65" width="60" height="12" rx="3" fill="#4A90D9" opacity="0.3"/>
    <text x="60" y="74" font-family="Arial" font-size="7" fill="#4A90D9" text-anchor="middle">StatefulWidget</text>
  </g>
  
  <g transform="translate(500, 130)">
    <!-- AsignaturasPage -->
    <rect x="0" y="0" width="120" height="80" rx="8" fill="#2d3a5c" stroke="#4A90D9" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="120" height="22" rx="8" fill="url(#presentationGrad)"/>
    <rect x="0" y="16" width="120" height="6" fill="url(#presentationGrad)"/>
    <text x="60" y="15" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">AsignaturasPage</text>
    <text x="60" y="45" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Lista asignaturas</text>
    <text x="60" y="58" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Badges estado</text>
    <rect x="30" y="65" width="60" height="12" rx="3" fill="#4A90D9" opacity="0.3"/>
    <text x="60" y="74" font-family="Arial" font-size="7" fill="#4A90D9" text-anchor="middle">StatefulWidget</text>
  </g>
  
  <g transform="translate(640, 130)">
    <!-- CalculadoraPage -->
    <rect x="0" y="0" width="120" height="80" rx="8" fill="#2d3a5c" stroke="#4A90D9" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="120" height="22" rx="8" fill="url(#presentationGrad)"/>
    <rect x="0" y="16" width="120" height="6" fill="url(#presentationGrad)"/>
    <text x="60" y="15" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">CalculadoraPage</text>
    <text x="60" y="45" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">Notas + %</text>
    <text x="60" y="58" font-family="Arial" font-size="9" fill="#a0a0a0" text-anchor="middle">C√°lculo promedio</text>
    <rect x="30" y="65" width="60" height="12" rx="3" fill="#4A90D9" opacity="0.3"/>
    <text x="60" y="74" font-family="Arial" font-size="7" fill="#4A90D9" text-anchor="middle">StatefulWidget</text>
  </g>
  
  <!-- Flecha UI ‚Üí Negocio -->
  <path d="M450 230 L450 260" stroke="#a0a0a0" stroke-width="3" fill="none" marker-end="url(#arrowGray)"/>
  
  <!-- ============ CAPA DE NEGOCIO ============ -->
  <rect x="50" y="270" width="800" height="130" rx="12" fill="#16213e" stroke="#34C759" stroke-width="2" filter="url(#shadow)"/>
  
  <rect x="70" y="280" width="180" height="28" rx="5" fill="url(#businessGrad)"/>
  <text x="160" y="299" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">CAPA DE NEGOCIO (L√≥gica)</text>
  
  <g transform="translate(100, 320)">
    <rect x="0" y="0" width="220" height="65" rx="8" fill="#2d3a5c" stroke="#34C759" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="220" height="20" rx="8" fill="url(#businessGrad)"/>
    <rect x="0" y="15" width="220" height="5" fill="url(#businessGrad)"/>
    <text x="110" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">Reglas de C√°lculo</text>
    <text x="110" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Promedio ponderado (suma=100%)</text>
    <text x="110" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Eximici√≥n (‚â•5.5) / Examen (30%)</text>
    <text x="110" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Validaci√≥n notas (1.0-7.0)</text>
  </g>
  
  <g transform="translate(340, 320)">
    <rect x="0" y="0" width="220" height="65" rx="8" fill="#2d3a5c" stroke="#34C759" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="220" height="20" rx="8" fill="url(#businessGrad)"/>
    <rect x="0" y="15" width="220" height="5" fill="url(#businessGrad)"/>
    <text x="110" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">Validaciones</text>
    <text x="110" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ RUN (M√≥dulo 11)</text>
    <text x="110" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Formato chileno (coma decimal)</text>
    <text x="110" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Input formatters personalizados</text>
  </g>
  
  <g transform="translate(580, 320)">
    <rect x="0" y="0" width="220" height="65" rx="8" fill="#2d3a5c" stroke="#34C759" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="220" height="20" rx="8" fill="url(#businessGrad)"/>
    <rect x="0" y="15" width="220" height="5" fill="url(#businessGrad)"/>
    <text x="110" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">Modelos de Datos</text>
    <text x="110" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Asignatura, NotaAsignatura</text>
    <text x="110" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ NotaItem (nota, %, esExamen)</text>
    <text x="110" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Serializaci√≥n JSON</text>
  </g>
  
  <!-- Flecha Negocio ‚Üí Servicios -->
  <path d="M450 400 L450 430" stroke="#a0a0a0" stroke-width="3" fill="none" marker-end="url(#arrowGray)"/>
  
  <!-- ============ CAPA DE SERVICIOS ============ -->
  <rect x="50" y="440" width="800" height="130" rx="12" fill="#16213e" stroke="#9C27B0" stroke-width="2" filter="url(#shadow)"/>
  
  <rect x="70" y="450" width="160" height="28" rx="5" fill="url(#servicesGrad)"/>
  <text x="150" y="469" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">CAPA DE SERVICIOS</text>
  
  <g transform="translate(100, 490)">
    <rect x="0" y="0" width="160" height="65" rx="8" fill="#2d3a5c" stroke="#9C27B0" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="160" height="20" rx="8" fill="url(#servicesGrad)"/>
    <rect x="0" y="15" width="160" height="5" fill="url(#servicesGrad)"/>
    <text x="80" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">AuthService</text>
    <text x="80" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Registro usuario</text>
    <text x="80" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Sesi√≥n activa</text>
    <text x="80" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ SharedPreferences</text>
  </g>
  
  <g transform="translate(280, 490)">
    <rect x="0" y="0" width="160" height="65" rx="8" fill="#2d3a5c" stroke="#9C27B0" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="160" height="20" rx="8" fill="url(#servicesGrad)"/>
    <rect x="0" y="15" width="160" height="5" fill="url(#servicesGrad)"/>
    <text x="80" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">RealtimeDBService</text>
    <text x="80" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Firebase Realtime DB</text>
    <text x="80" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ CRUD estudiantes</text>
    <text x="80" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Sync notas</text>
  </g>
  
  <g transform="translate(460, 490)">
    <rect x="0" y="0" width="160" height="65" rx="8" fill="#2d3a5c" stroke="#9C27B0" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="160" height="20" rx="8" fill="url(#servicesGrad)"/>
    <rect x="0" y="15" width="160" height="5" fill="url(#servicesGrad)"/>
    <text x="80" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">GitHubApiService</text>
    <text x="80" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Fetch mallas.json</text>
    <text x="80" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Carreras disponibles</text>
    <text x="80" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ HTTP requests</text>
  </g>
  
  <g transform="translate(640, 490)">
    <rect x="0" y="0" width="160" height="65" rx="8" fill="#2d3a5c" stroke="#9C27B0" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="160" height="20" rx="8" fill="url(#servicesGrad)"/>
    <rect x="0" y="15" width="160" height="5" fill="url(#servicesGrad)"/>
    <text x="80" y="14" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">DataManager</text>
    <text x="80" y="38" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Persistencia h√≠brida</text>
    <text x="80" y="50" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Local + Nube</text>
    <text x="80" y="62" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">‚Ä¢ Sincronizaci√≥n</text>
  </g>
  
  <!-- Flecha Servicios ‚Üí Datos -->
  <path d="M450 570 L450 600" stroke="#a0a0a0" stroke-width="3" fill="none" marker-end="url(#arrowGray)"/>
  
  <!-- ============ CAPA DE DATOS ============ -->
  <rect x="50" y="610" width="800" height="100" rx="12" fill="#16213e" stroke="#FF9500" stroke-width="2" filter="url(#shadow)"/>
  
  <rect x="70" y="620" width="140" height="28" rx="5" fill="url(#dataGrad)"/>
  <text x="140" y="639" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">CAPA DE DATOS</text>
  
  <!-- SharedPreferences -->
  <g transform="translate(100, 660)">
    <rect x="0" y="0" width="160" height="40" rx="8" fill="#2d3a5c" stroke="#FF9500" stroke-width="1.5" filter="url(#smallShadow)"/>
    <text x="80" y="18" font-family="Arial" font-size="10" font-weight="bold" fill="#FF9500" text-anchor="middle">SharedPreferences</text>
    <text x="80" y="32" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">Cache local ‚Ä¢ Offline</text>
  </g>
  
  <!-- Firebase -->
  <g transform="translate(370, 660)">
    <rect x="0" y="0" width="160" height="40" rx="8" fill="#2d3a5c" stroke="#FFCA28" stroke-width="1.5" filter="url(#smallShadow)"/>
    <rect x="0" y="0" width="160" height="15" rx="8" fill="url(#firebaseGrad)"/>
    <rect x="0" y="10" width="160" height="5" fill="url(#firebaseGrad)"/>
    <text x="80" y="12" font-family="Arial" font-size="9" font-weight="bold" fill="white" text-anchor="middle">üî• Firebase</text>
    <text x="80" y="32" font-family="Arial" font-size="8" fill="#FFCA28" text-anchor="middle">Realtime DB ‚Ä¢ Auth ‚Ä¢ AppCheck</text>
  </g>
  
  <!-- GitHub -->
  <g transform="translate(640, 660)">
    <rect x="0" y="0" width="160" height="40" rx="8" fill="#2d3a5c" stroke="#666" stroke-width="1.5" filter="url(#smallShadow)"/>
    <text x="80" y="18" font-family="Arial" font-size="10" font-weight="bold" fill="white" text-anchor="middle">GitHub Raw</text>
    <text x="80" y="32" font-family="Arial" font-size="8" fill="#a0a0a0" text-anchor="middle">mallas.json ‚Ä¢ config.json</text>
  </g>
  
  <!-- Leyenda -->
  <rect x="50" y="720" width="800" height="25" rx="6" fill="#0d1321" opacity="0.8"/>
  <text x="80" y="737" font-family="Arial" font-size="10" fill="#888">Patr√≥n:</text>
  <text x="125" y="737" font-family="Arial" font-size="10" fill="white" font-weight="bold">MVC + Services</text>
  <text x="250" y="737" font-family="Arial" font-size="10" fill="#888">Framework:</text>
  <text x="320" y="737" font-family="Arial" font-size="10" fill="#4A90D9" font-weight="bold">Flutter 3.18+</text>
  <text x="430" y="737" font-family="Arial" font-size="10" fill="#888">Backend:</text>
  <text x="485" y="737" font-family="Arial" font-size="10" fill="#FFCA28" font-weight="bold">Firebase</text>
  <text x="560" y="737" font-family="Arial" font-size="10" fill="#888">Persistencia:</text>
  <text x="640" y="737" font-family="Arial" font-size="10" fill="#FF9500" font-weight="bold">H√≠brida (Local + Cloud)</text>
  
  <!-- Footer -->
  <text x="450" y="748" font-family="Arial" font-size="9" fill="#555" text-anchor="middle">Sistema de Gesti√≥n Acad√©mica v2.0 - Grupo 3 - APTC106 - Diciembre 2025</text>
</svg>
